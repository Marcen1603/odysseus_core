#PARSER CQL
#DROPALLQUERIES
#QUERY 
DROP STREAM person IF EXISTS
#QUERY
CREATE STREAM person (timestamp STARTTIMESTAMP, id INTEGER, name STRING, email STRING, creditcard STRING, city STRING, state STRING) CHANNEL localhost : 65440
#QUERY 
DROP STREAM bid IF EXISTS
#QUERY
CREATE STREAM bid (timestamp STARTTIMESTAMP, auction INTEGER, bidder INTEGER, datetime LONG, price DOUBLE) 
    		WRAPPER 'GenericPush'
		    PROTOCOL 'SizeByteBuffer'
		    TRANSPORT 'NonBlockingTcp'
		    DATAHANDLER 'Tuple'
    		OPTIONS ('port' '65442', 'host' 'localhost')
#QUERY 
DROP STREAM auction IF EXISTS
#QUERY
CREATE STREAM auction (timestamp STARTTIMESTAMP, id INTEGER, itemname STRING, description STRING, initialbid INTEGER, reserve INTEGER, expires LONG, seller INTEGER, category INTEGER) CHANNEL localhost : 65441
#QUERY 
DROP STREAM category IF EXISTS
#QUERY
CREATE STREAM category (id INTEGER, name STRING, description STRING, parentid INTEGER) 
    		WRAPPER 'GenericPush'
		    PROTOCOL 'SizeByteBuffer'
		    TRANSPORT 'NonBlockingTcp'
		    DATAHANDLER 'Tuple'
    		OPTIONS ('port' '65443', 'host' 'localhost')
#QUERY
SELECT COUNT(auction) AS auctionCount FROM bid GROUP BY auction;
#QUERY
SELECT bidder AS auctioneer, COUNT(auction) AS Counter FROM bid [SIZE 5 MINUTES TIME];
#QUERY
SELECT COUNT(auction) AS Counter, city 
FROM bid, person
WHERE city != 'New York' 
HAVING Counter > 1000
#QUERY
SELECT COUNT(*) AS count FROM bid;
#QUERY
SELECT auction, AVG(auction) AS auctionAVG 
FROM bid 
GROUP BY auction
HAVING auctionAVG > 150