///OdysseusScript
#PARSER PQL
#DROPALLSOURCES
#DROPALLQUERIES
#ADDQUERY
json2 = ACCESS({
	source='json', 
	wrapper='GenericPull',
	transport='File',
	protocol='JSON',
	dataHandler='NestedKeyValueObject',
	options=[['filename','${BUNDLE-ROOT}\testdata\nestedMap2\input.json']],
	schema=[['timestamp','STARTTIMESTAMP']]
})
mapped2 = MAP({kvExpressions = [['customer.id', 'kaeufer.id']
							],
				keepAllAttributes = 'true',
				removeAttributes = ['customer.email', 'customer.ip_address']}, json2)

///SENDERjson = SENDER({
///	transport='File',
///	wrapper='GenericPush',
///	protocol='JSON',
///	dataHandler='NestedKeyValueObject',
///	SINK="SENDERjson",
///	options=[
///		['filename','${WORKSPACEPROJECT}\testdata\nestedMap2\output.json'],
///		['json.write.metadata','true']
///	]}, mapped2) 