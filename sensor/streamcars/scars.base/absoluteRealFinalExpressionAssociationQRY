#DEFINE bufferType      Punct

#DEFINE sensorSource    ACCESS(radarSensor) // Quellenoperator(!) des Sensors
#DEFINE sensorListName  radarSensor.scan:cars // Attributname der Liste der Autos in der Sensorquelle

#PARSER PQLHack
#TRANSCFG StreamCars
#QUERY
LOGICAL PLAN :
    ASSOCIATION-EXP-EVAL (
        ASSOCIATION-EXP-GATE (
        	${sensorSource},
            ${sensorListName},
            ${sensorListName},
            'eif(
              AbsValue(
                MatrixEntry(
                  MatrixMult(
                    MatrixMult(
                      MatrixTrans(
                        MatrixSub([${sensorListName}:car:posx;${sensorListName}:car:posy], [${sensorListName}:car:posx;${sensorListName}:car:posy])
                      ),
                    MatrixAdd(${sensorListName}:car#COVARIANCE, ${sensorListName}:car#COVARIANCE)
                    ),
                  MatrixSub([${sensorListName}:car:posx;${sensorListName}:car:posy], [${sensorListName}:car:posx;${sensorListName}:car:posy])
                  ),
                0,
              0)
              )
            <5, 100, 0)'
        ),
        ${sensorListName},
        ${sensorListName},
        'SqrtValue(SquareValue(${sensorListName}:car:posx-${sensorListName}:car:posx)+SquareValue(${sensorListName}:car:posy-${sensorListName}:car:posy)+4)'
    );