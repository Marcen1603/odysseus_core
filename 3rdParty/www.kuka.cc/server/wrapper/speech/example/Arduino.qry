///OdysseusScript
#PARSER PQL
#ADDQUERY

input =  ACCESS({
	SOURCE = 'Arduino', 
	TRANSPORT = 'RS232', 
	DATAHANDLER = 'Tuple', 
	WRAPPER = 'GenericPush', 
	PROTOCOL = 'CSV',
	SCHEMA = [['timestamp', 'STARTTIMESTAMP'],['value', 'DOUBLE']],
	OPTIONS = [['port', '/dev/ttyACM0'], ['baud', '9600']]
	})

agg = AGGREGATE({AGGREGATIONS = [['avg', 'value', 'average']]}, 
                TIMEWINDOW({SIZE = 5}, input)
               )